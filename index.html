<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FotoPrint - Editor de Fotos para A4</title>
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --danger: #f72585;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .upload-section {
            background-color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .upload-area {
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .upload-area i {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .upload-area p {
            margin-bottom: 15px;
            color: #666;
        }

        .btn {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            text-align: center;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--secondary);
        }

        .btn-secondary:hover {
            background-color: #6510a3;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #e01a6f;
        }

        .btn-full {
            width: 100%;
        }

        .preview-section {
            background-color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .preview-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .preview-title h2 {
            font-size: 1.5rem;
        }

        .a4-preview-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-bottom: 20px;
        }

        .a4-preview {
            background-color: white;
            width: 100%;
            height: 400px;
            border: 1px solid #ddd;
            position: relative;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .a4-page {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .photo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 5mm;
            padding: 5mm;
            width: 100%;
            height: 100%;
        }

        .photo-slot {
            position: relative;
            background-color: #f0f0f0;
            border: 0.5mm dashed #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .photo-slot img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .photo-slot.empty::before {
            content: "+";
            font-size: 2rem;
            color: #aaa;
        }

        .photo-slot .cut-line {
            position: absolute;
            border: 0.5mm dashed red;
            width: 95mm;
            height: 145mm;
            pointer-events: none;
        }

        .photo-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .photo-list {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .photo-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .photo-item:last-child {
            border-bottom: none;
        }

        .photo-thumb {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 15px;
        }

        .photo-info {
            flex: 1;
        }

        .photo-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .photo-size {
            font-size: 0.8rem;
            color: #666;
        }

        .photo-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            transition: var(--transition);
            padding: 5px;
            border-radius: 4px;
        }

        .action-btn:hover {
            color: var(--primary);
            background-color: rgba(67, 97, 238, 0.1);
        }

        .rotate-btn {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .instructions {
            background-color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-top: 30px;
        }

        .instructions h2 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .instructions ol {
            margin-left: 20px;
        }

        .instructions li {
            margin-bottom: 10px;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }

        .hidden {
            display: none;
        }

        .drag-over {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.1);
        }

        .page-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .preview-controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>FotoPrint</h1>
            <p>Importe suas fotos e prepare para impress√£o em formato A4</p>
        </header>

        <div class="main-content">
            <div class="upload-section">
                <h2>Importar Fotos</h2>
                <p>Selecione at√© 8 fotos para impress√£o (2 folhas A4)</p>
                
                <div class="upload-area" id="uploadArea">
                    <i>üì∑</i>
                    <p>Arraste e solte suas fotos aqui</p>
                    <p>ou</p>
                    <input type="file" id="fileInput" accept="image/*" multiple class="hidden">
                    <button class="btn" id="browseBtn">Selecionar Fotos</button>
                </div>

                <div class="photo-list" id="photoList">
                    <!-- Lista de fotos ser√° gerada aqui -->
                </div>

                <button class="btn btn-secondary btn-full" id="processBtn" disabled>Processar Fotos</button>
                <button class="btn btn-danger btn-full" id="clearBtn" style="margin-top: 10px;">Limpar Todas</button>
            </div>

            <div class="preview-section">
                <div class="preview-title">
                    <h2>Pr√©-visualiza√ß√£o A4</h2>
                    <button class="btn" id="downloadBtn" disabled>Baixar para Impress√£o</button>
                </div>

                <div class="preview-controls">
                    <span id="pageIndicator">P√°gina 1 de 1</span>
                    <div>
                        <button class="btn" id="prevPageBtn" disabled>Anterior</button>
                        <button class="btn" id="nextPageBtn" disabled>Pr√≥xima</button>
                    </div>
                </div>
                
                <div class="a4-preview-container">
                    <div class="a4-preview">
                        <div class="a4-page">
                            <div class="photo-grid" id="photoGridPage1">
                                <!-- Slots de fotos da p√°gina 1 ser√£o gerados aqui -->
                            </div>
                            <div class="page-indicator">P√°gina 1</div>
                        </div>
                    </div>
                    <div class="a4-preview" id="page2Preview" style="display: none;">
                        <div class="a4-page">
                            <div class="photo-grid" id="photoGridPage2">
                                <!-- Slots de fotos da p√°gina 2 ser√£o gerados aqui -->
                            </div>
                            <div class="page-indicator">P√°gina 2</div>
                        </div>
                    </div>
                </div>

                <div class="photo-controls">
                    <button class="btn" id="autoArrangeBtn" disabled>Organizar Automaticamente</button>
                    <button class="btn" id="rotateAllBtn" disabled>Rotacionar Todas</button>
                </div>
            </div>
        </div>

        <div class="instructions">
            <h2>Como usar:</h2>
            <ol>
                <li>Selecione at√© 8 fotos usando o bot√£o "Selecionar Fotos" ou arrastando-as para a √°rea indicada</li>
                <li>Clique em "Processar Fotos" para ajustar automaticamente cores, DPI e dimensionamento</li>
                <li>Visualize o layout nas duas p√°ginas A4 na √°rea de pr√©-visualiza√ß√£o</li>
                <li>Use os bot√µes de rota√ß√£o individuais para ajustar a orienta√ß√£o das fotos</li>
                <li>Use os controles de p√°gina para navegar entre as duas folhas A4</li>
                <li>Clique em "Baixar para Impress√£o" para salvar o arquivo pronto para impress√£o</li>
            </ol>
            <p><strong>Especifica√ß√µes:</strong> Cada foto ter√° 9,5x14,5cm com 5mm de espa√ßamento entre elas e nas bordas da folha. Linhas de corte de 0,5mm ser√£o adicionadas.</p>
        </div>

        <footer>
            <p>FotoPrint &copy; 2023 - Um editor simples e eficiente para suas fotos</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos do DOM
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const browseBtn = document.getElementById('browseBtn');
            const photoList = document.getElementById('photoList');
            const photoGridPage1 = document.getElementById('photoGridPage1');
            const photoGridPage2 = document.getElementById('photoGridPage2');
            const processBtn = document.getElementById('processBtn');
            const clearBtn = document.getElementById('clearBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const autoArrangeBtn = document.getElementById('autoArrangeBtn');
            const rotateAllBtn = document.getElementById('rotateAllBtn');
            const prevPageBtn = document.getElementById('prevPageBtn');
            const nextPageBtn = document.getElementById('nextPageBtn');
            const page2Preview = document.getElementById('page2Preview');
            const pageIndicator = document.getElementById('pageIndicator');

            // Estado da aplica√ß√£o
            let photos = [];
            let currentPage = 1;
            const MAX_PHOTOS = 8;
            const PHOTOS_PER_PAGE = 4;

            // Inicializar slots de fotos
            function initializePhotoSlots() {
                photoGridPage1.innerHTML = '';
                photoGridPage2.innerHTML = '';
                
                for (let i = 0; i < PHOTOS_PER_PAGE; i++) {
                    const slot1 = document.createElement('div');
                    slot1.className = 'photo-slot empty';
                    slot1.dataset.index = i;
                    photoGridPage1.appendChild(slot1);
                    
                    const slot2 = document.createElement('div');
                    slot2.className = 'photo-slot empty';
                    slot2.dataset.index = i + PHOTOS_PER_PAGE;
                    photoGridPage2.appendChild(slot2);
                }
            }

            // Atualizar lista de fotos
            function updatePhotoList() {
                photoList.innerHTML = '';
                
                if (photos.length === 0) {
                    const emptyMsg = document.createElement('p');
                    emptyMsg.textContent = 'Nenhuma foto selecionada';
                    emptyMsg.style.textAlign = 'center';
                    emptyMsg.style.color = '#666';
                    photoList.appendChild(emptyMsg);
                    return;
                }
                
                photos.forEach((photo, index) => {
                    const item = document.createElement('div');
                    item.className = 'photo-item';
                    
                    const thumb = document.createElement('img');
                    thumb.className = 'photo-thumb';
                    thumb.src = photo.url;
                    
                    const info = document.createElement('div');
                    info.className = 'photo-info';
                    
                    const name = document.createElement('div');
                    name.className = 'photo-name';
                    name.textContent = photo.name;
                    
                    const size = document.createElement('div');
                    size.className = 'photo-size';
                    size.textContent = formatFileSize(photo.size);
                    
                    info.appendChild(name);
                    info.appendChild(size);
                    
                    const actions = document.createElement('div');
                    actions.className = 'photo-actions';
                    
                    const rotateBtn = document.createElement('button');
                    rotateBtn.className = 'action-btn rotate-btn';
                    rotateBtn.innerHTML = '‚Üª Rotacionar';
                    rotateBtn.title = 'Rotacionar';
                    rotateBtn.addEventListener('click', () => rotatePhoto(index));
                    
                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'action-btn';
                    removeBtn.innerHTML = '‚úï Remover';
                    removeBtn.title = 'Remover';
                    removeBtn.addEventListener('click', () => removePhoto(index));
                    
                    actions.appendChild(rotateBtn);
                    actions.appendChild(removeBtn);
                    
                    item.appendChild(thumb);
                    item.appendChild(info);
                    item.appendChild(actions);
                    
                    photoList.appendChild(item);
                });
            }

            // Atualizar grade de pr√©-visualiza√ß√£o
            function updatePhotoGrid() {
                const slotsPage1 = document.querySelectorAll('#photoGridPage1 .photo-slot');
                const slotsPage2 = document.querySelectorAll('#photoGridPage2 .photo-slot');
                
                // Atualizar p√°gina 1
                slotsPage1.forEach((slot, index) => {
                    // Limpar slot
                    slot.innerHTML = '';
                    slot.className = 'photo-slot';
                    
                    if (photos[index]) {
                        // Adicionar foto ao slot
                        const img = document.createElement('img');
                        img.src = photos[index].url;
                        img.style.transform = `rotate(${photos[index].rotation}deg)`;
                        slot.appendChild(img);
                        
                        // Adicionar linha de corte
                        const cutLine = document.createElement('div');
                        cutLine.className = 'cut-line';
                        slot.appendChild(cutLine);
                    } else {
                        // Slot vazio
                        slot.className = 'photo-slot empty';
                    }
                });
                
                // Atualizar p√°gina 2
                slotsPage2.forEach((slot, index) => {
                    // Limpar slot
                    slot.innerHTML = '';
                    slot.className = 'photo-slot';
                    
                    const photoIndex = index + PHOTOS_PER_PAGE;
                    if (photos[photoIndex]) {
                        // Adicionar foto ao slot
                        const img = document.createElement('img');
                        img.src = photos[photoIndex].url;
                        img.style.transform = `rotate(${photos[photoIndex].rotation}deg)`;
                        slot.appendChild(img);
                        
                        // Adicionar linha de corte
                        const cutLine = document.createElement('div');
                        cutLine.className = 'cut-line';
                        slot.appendChild(cutLine);
                    } else {
                        // Slot vazio
                        slot.className = 'photo-slot empty';
                    }
                });
                
                // Mostrar/ocultar p√°gina 2 conforme necess√°rio
                if (photos.length > PHOTOS_PER_PAGE) {
                    page2Preview.style.display = 'block';
                    pageIndicator.textContent = `P√°gina ${currentPage} de 2`;
                    nextPageBtn.disabled = false;
                } else {
                    page2Preview.style.display = 'none';
                    pageIndicator.textContent = 'P√°gina 1 de 1';
                    nextPageBtn.disabled = true;
                    currentPage = 1;
                }
                
                // Atualizar estado dos bot√µes de navega√ß√£o
                prevPageBtn.disabled = currentPage === 1;
            }

            // Formatar tamanho do arquivo
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            // Processar fotos (simula√ß√£o de ajuste de cores e DPI)
            function processPhotos() {
                if (photos.length === 0) return;
                
                // Simular processamento
                alert('Processando fotos... Ajustando cores, DPI e dimensionamento para 9,5x14,5cm.');
                
                // Atualizar interface
                updatePhotoGrid();
                downloadBtn.disabled = false;
                autoArrangeBtn.disabled = false;
                rotateAllBtn.disabled = false;
                
                // Se temos mais de 4 fotos, mostrar a segunda p√°gina
                if (photos.length > PHOTOS_PER_PAGE) {
                    page2Preview.style.display = 'block';
                    pageIndicator.textContent = `P√°gina ${currentPage} de 2`;
                    nextPageBtn.disabled = false;
                }
            }

            // Rotacionar foto espec√≠fica
            function rotatePhoto(index) {
                photos[index].rotation = (photos[index].rotation + 90) % 360;
                updatePhotoGrid();
            }

            // Rotacionar todas as fotos
            function rotateAllPhotos() {
                photos.forEach(photo => {
                    photo.rotation = (photo.rotation + 90) % 360;
                });
                updatePhotoGrid();
            }

            // Remover foto
            function removePhoto(index) {
                photos.splice(index, 1);
                updatePhotoList();
                updatePhotoGrid();
                updateProcessButton();
            }

            // Atualizar estado do bot√£o de processamento
            function updateProcessButton() {
                processBtn.disabled = photos.length === 0;
            }

            // Manipular arquivos selecionados
            function handleFiles(files) {
                const remainingSlots = MAX_PHOTOS - photos.length;
                
                if (files.length > remainingSlots) {
                    alert(`Voc√™ j√° tem ${photos.length} fotos. S√≥ √© poss√≠vel adicionar mais ${remainingSlots}.`);
                    files = Array.from(files).slice(0, remainingSlots);
                }
                
                Array.from(files).forEach(file => {
                    if (!file.type.match('image.*')) {
                        alert(`O arquivo "${file.name}" n√£o √© uma imagem.`);
                        return;
                    }
                    
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        photos.push({
                            name: file.name,
                            size: file.size,
                            url: e.target.result,
                            rotation: 0
                        });
                        
                        updatePhotoList();
                        updateProcessButton();
                    };
                    
                    reader.readAsDataURL(file);
                });
            }

            // Navegar para a p√°gina anterior
            function goToPrevPage() {
                if (currentPage > 1) {
                    currentPage--;
                    updatePageView();
                }
            }

            // Navegar para a pr√≥xima p√°gina
            function goToNextPage() {
                if (currentPage < 2) {
                    currentPage++;
                    updatePageView();
                }
            }

            // Atualizar visualiza√ß√£o da p√°gina
            function updatePageView() {
                if (currentPage === 1) {
                    page2Preview.style.display = 'none';
                    prevPageBtn.disabled = true;
                    nextPageBtn.disabled = false;
                } else {
                    page2Preview.style.display = 'block';
                    prevPageBtn.disabled = false;
                    nextPageBtn.disabled = true;
                }
                pageIndicator.textContent = `P√°gina ${currentPage} de 2`;
            }

            // Event Listeners
            browseBtn.addEventListener('click', () => fileInput.click());
            
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
                fileInput.value = ''; // Reset para permitir selecionar os mesmos arquivos novamente
            });
            
            // Drag and Drop
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('drag-over');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                handleFiles(e.dataTransfer.files);
            });
            
            processBtn.addEventListener('click', processPhotos);
            
            clearBtn.addEventListener('click', () => {
                photos = [];
                updatePhotoList();
                updatePhotoGrid();
                updateProcessButton();
                downloadBtn.disabled = true;
                autoArrangeBtn.disabled = true;
                rotateAllBtn.disabled = true;
                currentPage = 1;
                updatePageView();
            });
            
            downloadBtn.addEventListener('click', () => {
                alert('Download iniciado! Seu arquivo A4 com as fotos est√° pronto para impress√£o.');
                // Em uma implementa√ß√£o real, aqui seria gerado um PDF ou imagem para download
            });
            
            autoArrangeBtn.addEventListener('click', () => {
                alert('Fotos organizadas automaticamente!');
                // Em uma implementa√ß√£o real, aqui seria implementada a l√≥gica de organiza√ß√£o autom√°tica
            });
            
            rotateAllBtn.addEventListener('click', rotateAllPhotos);
            
            prevPageBtn.addEventListener('click', goToPrevPage);
            nextPageBtn.addEventListener('click', goToNextPage);

            // Inicializar
            initializePhotoSlots();
            updatePhotoList();
        });
    </script>
</body>
</html>
